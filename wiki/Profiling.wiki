#summary Peter-bochs profiling feature.
#labels HowTo

= Table of content =

<wiki:toc max_depth="3" />

= Introduction =

Peter-bochs provides profiling feature, you can use it to understand the running behaviour of your hobby os.


= Installation =

To add profiling supprot, you need to compile bochs with instrument feature, please follow the steps

== Step 1, download peter-bochs instrument stub and put it inside the bochs source directory ==

[http://peter-bochs.googlecode.com/files/peter-bochs-instrument20100904.tar.bz2]

[http://peter-bochs.googlecode.com/files/install-peter-bochs-instrument.png]

== Step 2, compile bochs with peter-bochs instrument ==

$./configure --enable-disasm --enable-debugger --enable-vbe --enable-instrumentation=instrument/peter-bochs

$make

$make install

= How to use profiling =

== Start peter-bochs with profiling ==

Please click "Setting" on the toolbar, go to "Profiling tab", check all checkboxs. After that, restart the bochs by clicking "Stop bochs" and "Start bochs" button on the toolbar.

[http://peter-bochs.googlecode.com/files/enable_profiling.png]

== Feature 1, you can know which memory has the highest r/w frequency ==

[http://peter-bochs.googlecode.com/files/profiling_memory_rw_count.png]

== Feature 2, you can know the r/w count of a specified memory region

[http://peter-bochs.googlecode.com/files/profiling_jmp_count.png]

* To be continue, still writing *